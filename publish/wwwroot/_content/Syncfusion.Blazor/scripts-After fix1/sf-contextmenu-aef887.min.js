(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"./bundles/sf-contextmenu.js":function(e,t,n){"use strict";n.r(t);n("./modules/sf-contextmenu.js")},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";var e="e-menu-item",t=function(){function t(e,t,n,s){this.wrapper=e,this.target=t,this.filter=n,this.dotnetRef=s,this.wrapper.blazor__instance=this,this.subMenuOpen=!1,this.addContextMenuEvent(),sf.base.EventHandler.add(this.wrapper,"keydown",this.keyDownHandler,this)}return t.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var n=sf.base.selectAll(this.target);if(n.length){for(var s=0,i=n.length;s<i;s++)if(t=n[s],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,"contextmenu",this.cmenuHandler,this);else if(sf.base.Browser.isIos){var o=sf.base.getInstance(t,sf.base.Touch);o&&o.destroy()}else sf.base.EventHandler.remove(t,"contextmenu",this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,a=sf.popups.getScrollableParent(this.targetElement);r<a.length;r++){var l=a[r];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var c=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),c=sf.popups.getScrollableParent(this.targetElement)):c=sf.popups.getScrollableParent(t);for(var d=0,u=c;d<u.length;d++){var h=u[d];sf.base.EventHandler.remove(h,"scroll",this.scrollHandler)}this.targetElement=null}}}},t.prototype.scrollHandler=function(e){this.wrapper.childElementCount&&this.dotnetRef.invokeMethodAsync("CloseMenu",e)},t.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},t.prototype.keyDownHandler=function(t){if(t.preventDefault(),40===t.keyCode||38===t.keyCode){var n=void 0,s=void 0,i=void 0;t.target.classList.contains("e-menu-parent")?((i=(s=t.target).querySelector("."+e+".e-focused"))?(n=Array.prototype.indexOf.call(s.children,i),n=40===t.keyCode?n===s.childElementCount-1?0:n+1:0===n?s.childElementCount-1:n-1):n=0,n=this.isValidLI(s,0,40===t.keyCode)):t.target.classList.contains(e)&&(i=(s=t.target.parentElement).querySelector("."+e+".e-focused"),n=Array.prototype.indexOf.call(s.children,i||t.target),n=40===t.keyCode?n===s.childElementCount-1?0:n+1:0===n?s.childElementCount-1:n-1,n=this.isValidLI(s,n,40===t.keyCode)),s&&-1!==n&&s.children[n].focus()}else if(((this.wrapper.classList.contains("e-rtl")?39===t.keyCode:37===t.keyCode)||27===t.keyCode)&&(t.target.classList.contains("e-ul")||t.target.classList.contains(e)&&!t.target.parentElement.classList.contains("e-contextmenu"))){var o=(s=t.target.classList.contains("e-ul")?t.target:t.target.parentElement).previousElementSibling.querySelector("."+e+".e-selected");o&&o.focus()}},t.prototype.isValidLI=function(e,t,n,s){void 0===s&&(s=0);var i=e.children[t];return s===e.childElementCount?-1:((i.classList.contains("e-separator")||i.classList.contains("e-disabled")||i.classList.contains("e-menu-hide"))&&(t=n?t===e.childElementCount-1?0:t+1:0===t?e.childElementCount-1:t-1,s++),((i=e.children[t]).classList.contains("e-separator")||i.classList.contains("e-disabled")||i.classList.contains("e-menu-hide"))&&(t=this.isValidLI(e,t,n)),t)},t.prototype.cmenuHandler=function(e){if(this.filter){for(var t=!1,n=this.filter.split(" "),s=0,i=n.length;s<i;s++)if(sf.base.closest(e.target,n[s])){t=!0;break}if(!t)return}e.preventDefault();var o=e.changedTouches?e.changedTouches[0].pageX:e.pageX,r=e.changedTouches?e.changedTouches[0].pageY:e.pageY;this.dotnetRef.invokeMethodAsync("OpenContextMenu",Math.ceil(o),Math.ceil(r),e)},t.prototype.contextMenuPosition=function(e,t,n,s){this.removeEventListener();var i=this.wrapper.firstElementChild;i.style.visibility="hidden",i.classList.remove("e-transparent");var o=i.getBoundingClientRect(),r=this.getMenuWidth(i,o.width,n);if(s&&sf.base.Browser.isDevice)return{Width:Math.ceil(r)};var a=this.wrapper.getBoundingClientRect();if(t-pageYOffset+o.height>document.documentElement.clientHeight){var l=document.documentElement.clientHeight-o.height-20;l>document.documentElement.clientTop&&(t=l+pageYOffset)}if(e-pageXOffset+r>document.documentElement.clientWidth){var c=document.documentElement.clientWidth-r-20;c>document.documentElement.clientLeft&&(e=c+pageYOffset)}e-=a.left+pageXOffset,t-=a.top+pageYOffset;var d=sf.popups.getZindexPartial(this.wrapper);return i.classList.add("e-transparent"),this.wrapper.style.top=t+"px",this.wrapper.style.left=e+"px",i.style.visibility="",i.focus(),sf.base.EventHandler.add(document,"mousedown touchstart",this.mouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.mouseOverHandler,this),{Left:Math.ceil(e+1),Top:Math.ceil(t+1),ZIndex:d,Width:Math.ceil(r)}},t.prototype.getMenuWidth=function(e,t,n){var s=e.getElementsByClassName("e-caret")[0];return s&&(t+=parseInt(getComputedStyle(s)[n?"marginRight":"marginLeft"],10)),t<120?120:t},t.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown touchstart",this.mouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.mouseOverHandler)},t.prototype.mouseDownHandler=function(e){this.wrapper.childElementCount?sf.base.closest(e.target,"#"+this.wrapper.id)||this.dotnetRef.invokeMethodAsync("CloseMenu",e):this.removeEventListener()},t.prototype.mouseOverHandler=function(e){if(this.wrapper.childElementCount){this.subMenuOpen&&this.wrapper.childElementCount>1?sf.base.closest(e.target,"#"+this.wrapper.id)||(this.subMenuOpen=!1,this.dotnetRef.invokeMethodAsync("CloseSubMenu",e)):this.subMenuOpen&&(this.subMenuOpen=!1);var t=document.activeElement;if(!sf.base.closest(t,"#"+this.wrapper.id)&&this.wrapper.childElementCount){var n=this.wrapper.lastElementChild;n&&n.focus()}}else this.removeEventListener()},t.prototype.subMenuPosition=function(t,n){var s=this.wrapper.children[this.wrapper.childElementCount-2].querySelector("."+e+".e-selected").getBoundingClientRect(),i=this.wrapper.getBoundingClientRect(),o=this.wrapper.lastElementChild;o.style.visibility="hidden",o.classList.remove("e-transparent");var r,a,l=o.getBoundingClientRect(),c=this.getMenuWidth(o,l.width,t);t?(a=parseInt(getComputedStyle(o).borderWidth,10),r=s.left-c-i.left):r=s.right-i.left;var d=s.top-i.top;o.classList.add("e-transparent"),o.style.visibility="";var u=o.querySelector("."+e+".e-focused");if(u?u.focus():o.focus(),t)s.left-a-c<document.documentElement.clientLeft&&s.right+c<document.documentElement.clientWidth&&(r=s.right-i.left);else if(s.right+c>document.documentElement.clientWidth){var h=s.left-c;h>document.documentElement.clientLeft&&(r=h-i.left)}if(s.top+l.height>document.documentElement.clientHeight){var p=document.documentElement.clientHeight-l.height-20;p>document.documentElement.clientTop&&(d=p-i.top)}return this.subMenuOpen=!n,{Left:Math.ceil(r),Top:Math.ceil(d),Width:Math.ceil(c)}},t.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t}},t.prototype.destroy=function(){this.removeEventListener(),this.addContextMenuEvent(!1)},t}();return{initialize:function(e,n,s,i){return new t(e,n,s,i),sf.base.Browser.isDevice},contextMenuPosition:function(e,t,n,s,i){return e.blazor__instance.contextMenuPosition(t,n,s,i)},subMenuPosition:function(e,t,n){return e.blazor__instance.subMenuPosition(t,n)},onPropertyChanged:function(e,t,n){e.blazor__instance.onPropertyChanged(t,n)},destroy:function(e){e.blazor__instance.destroy()}}}()}}]);