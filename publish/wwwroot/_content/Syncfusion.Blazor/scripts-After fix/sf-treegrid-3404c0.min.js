(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"./bundles/sf-treegrid.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-treegrid.js")},"./modules/sf-treegrid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeGrid=function(){"use strict";var e=function(){function e(e){this.treeCopyContent="",this.copiedUniqueIdCollection=[],this.parent=e,this.gridClipboard=this.parent.grid.clipboardModule,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},e.prototype.setCopyData=function(e){var t=this.parent.options.currentViewData;if(""===window.getSelection().toString()){this.clipBoardTextArea.value=this.gridClipboard.copyContent="";var i=this.parent.grid.getRows();if("Cell"!==this.parent.grid.selectionMode){for(var n=this.parent.grid.getSelectedRowIndexes().sort((function(e,t){return e-t})),o=0;o<n.length;o++)if(o>0&&(this.treeCopyContent+="\n"),!i[n[o]].classList.contains("e-summaryrow")){var r=[].slice.call(i[n[o]].querySelectorAll(".e-rowcell")),s=this.parent.options.currentViewData[n[o]].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(s)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(t,n[o],i,e,o),this.gridClipboard.getCopyData(r,!1,"\t",e),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUniqueIdCollection.push(s),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(t,n[o],i,e))}if(e){var a=[];for(o=0;o<this.parent.grid.getVisibleColumns().length;o++)a[o]=this.parent.grid.getVisibleColumns()[o].headerText;this.gridClipboard.getCopyData(a,!1,"\t",e),this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}this.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.clipBoardTextArea.select()),this.gridClipboard.isSelect=!0,this.copiedUniqueIdCollection=[],this.treeCopyContent=""}}},e.prototype.parentContentData=function(e,t,i,n,o){if(!sf.base.isNullOrUndefined(e[t].parentRecord))for(var r=e[t].parentRecord.level,s=0;s<r+1;s++)for(var a=0;a<e.length;a++)if(!sf.base.isNullOrUndefined(e[t].parentRecord)&&e[a].uniqueID===e[t].parentRecord.uniqueID){t=a;var l=[].slice.call(i[t].querySelectorAll(".e-rowcell")),d=e[a].uniqueID;if(-1===this.copiedUniqueIdCollection.indexOf(d)){this.gridClipboard.getCopyData(l,!1,"\t",n),this.treeCopyContent=o>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent,this.copiedUniqueIdCollection.push(d),this.gridClipboard.copyContent="";break}}},e.prototype.childContentData=function(e,t,i,n){if(e[t].hasChildRecords)for(var o=e[t].childRecords,r=0;r<o.length;r++)for(var s=0;s<e.length;s++)if(!sf.base.isNullOrUndefined(o[r].uniqueID)&&e[s].uniqueID===o[r].uniqueID){if(!sf.base.isNullOrUndefined(i[s])&&!i[s].classList.contains("e-summaryrow")){var a=[].slice.call(i[s].querySelectorAll(".e-rowcell")),l=e[s].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(l)&&(this.gridClipboard.getCopyData(a,!1,"\t",n),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUniqueIdCollection.push(l),this.childContentData(e,s,i,n))}break}},e}(),t=function(){function t(t,i,n){this.columnModel=[],this.element=t,this.element.blazor_instance=this,this.grid=t.querySelector("#"+t.id+"_gridcontrol").blazor__instance,this.dotNetRef=n,this.options=i,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.initOptions(this.options),this.clipboardModule=new e(this),this.wireEvents()}return t.prototype.initOptions=function(e){e.hasRowTemplate&&this.renderTreeCell(e.currentViewData,e.treeColumnIndex)},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.content,"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},t.prototype.mouseClickHandler=function(e){var t=e.target;if(this.options.hasRowTemplate&&(t.classList.contains("e-treegridexpand")||t.classList.contains("e-treegridcollapse"))){var i=function(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n}(e.target,"e-row");this.dotNetRef.invokeMethodAsync("ExpandRowTemplate",i.rowIndex)}},t.prototype.KeyDownHandler=function(e){67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0)},t.prototype.changeExpandIcon=function(e,t){if("collapse"===t){var i=e.querySelector(".e-treegridexpand");sf.base.addClass([i],"e-treegridcollapse"),sf.base.removeClass([i],"e-treegridexpand")}else if("expand"===t){i=e.querySelector(".e-treegridcollapse");sf.base.addClass([i],"e-treegridexpand"),sf.base.removeClass([i],"e-treegridcollapse")}},t.prototype.renderTreeCell=function(e,t,i){if(e.length)for(var n=this.getRows(),o=0;o<e.length;o++)if(sf.base.isNullOrUndefined(n[o].querySelector(".e-treegridexpand"))&&sf.base.isNullOrUndefined(n[o].querySelector(".e-treegridcollapse"))){var r=e[o],s=n[o].cells[t];if(!s.querySelector(".e-treecolumn-container")){var a=void 0,l=r.level,d=void 0;a=sf.base.isNullOrUndefined(r.parentRecord)?r.index:r.parentRecord.index;for(var c=sf.base.createElement("div",{className:"e-treecolumn-container"}),p=sf.base.createElement("span",{className:"e-icons e-none",styles:"width: 10px; display: inline-block"}),h=0;h<l;h++)c.appendChild(p.cloneNode());if(sf.base.isNullOrUndefined(r.hasFilteredChildRecords)?r.hasChildRecords:r.hasFilteredChildRecords){sf.base.addClass([s],"e-treerowcell");var u=sf.base.createElement("span",{className:"e-icons"}),C=r.expanded;sf.base.addClass([u],C?"e-treegridexpand":"e-treegridcollapse"),c.appendChild(u),p.style.width="7px",c.appendChild(p.cloneNode())}else(l||!l&&!r.level)&&(c.appendChild(p.cloneNode()),c.appendChild(p.cloneNode()));d=sf.base.createElement("span",{className:"e-treecell"}),sf.base.addClass([s],"e-gridrowindex"+a+"level"+r.level),d.innerHTML=s.innerHTML,s.innerHTML="",c.appendChild(d),s.appendChild(c)}}else this.changeExpandIcon(n[o],i)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.content,"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},t.prototype.destroy=function(){this.unWireEvents()},t}();return{initialize:function(e,i,n){sf.base.enableBlazorMode(),new t(e,i,n)},modelChanged:function(e,t,i){JSON.parse(i);t.hasRowTemplate&&e.blazor_instance.renderTreeCell(t.currentViewData,t.treeColumnIndex)},rowStateChanged:function(e,t,i){t.hasRowTemplate&&e.blazor_instance.renderTreeCell(t.currentViewData,t.treeColumnIndex,i)},copyToClipBoard:function(e,t){"Cell"===e.blazor_instance.grid.options.selectionMode?e.blazor_instance.grid.clipboardModule.copy(t):e.blazor_instance.clipboardModule.copy(t)},destroy:function(e){e.blazor_instance.destroy()}}}()}}]);